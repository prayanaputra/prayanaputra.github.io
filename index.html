<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Chimera - Penempatan VIII.3</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=VT323&display=swap');

        :root {
            --bg-dark: #0d0d1a;
            --text-light: #f0f0f0;
            --neon-cyan: #00f5ff;
            --neon-magenta: #ff00ff;
            --neon-green: #39FF14;
            --border-radius: 20px;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-dark);
            color: var(--text-light);
            padding-top: 2rem;
            padding-bottom: 2rem;
        }

        #matrix-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }

        .screen {
            background: rgba(0, 15, 30, 0.5);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--neon-cyan);
            box-shadow: 0 0 25px rgba(0, 245, 255, 0.3);
            animation: fadeIn 0.8s ease-out;
        }
        h2 { font-size: 2rem; margin-top: 0; }
        .hidden { display: none !important; }

        /* --- LAYAR PEMBUKA --- */
        #intro-screen h2 { text-shadow: 0 0 15px var(--neon-cyan); }
        #fingerprint-icon { font-size: 5rem; color: var(--neon-cyan); cursor: pointer; animation: pulse 2s infinite; }
        #start-portal-btn { display: none; } /* Tombol asli disembunyikan */

        /* --- Tombol & Kuis --- */
        #submit-name-btn { box-shadow: 0 0 25px var(--neon-magenta); background: var(--neon-magenta); }
        #submit-name-btn:hover, #submit-answer-btn:hover, #start-portal-btn:hover { transform: scale(1.05); filter: brightness(1.2); }
        #error-message { color: var(--neon-magenta); font-weight: 600; height: 20px; }
        
        .modal-content { background-color: rgba(20, 20, 30, 0.7); backdrop-filter: blur(15px); border: 2px solid var(--neon-green); box-shadow: 0 0 30px rgba(57, 255, 20, 0.3); }
        .modal-title { color: var(--neon-green); text-shadow: 0 0 10px var(--neon-green); }
        .btn-close { filter: invert(1) grayscale(100%) brightness(200%); }
        .quiz-option-btn { background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(255, 255, 255, 0.3); font-weight: 600; transition: all 0.2s ease-in-out; }
        .quiz-option-btn:hover { background: rgba(255, 255, 255, 0.15); border-color: var(--neon-cyan); transform: translateY(-3px); }
        .quiz-option-btn.selected { border-color: var(--neon-cyan); background: var(--neon-cyan); color: var(--bg-dark); font-weight: 700; box-shadow: 0 0 15px var(--neon-cyan); }
        #submit-answer-btn { background: var(--neon-green); color: var(--bg-dark); box-shadow: 0 0 20px var(--neon-green); transition: all 0.2s ease-in-out; }
        #quiz-feedback.correct { color: var(--neon-green); } #quiz-feedback.incorrect { color: var(--neon-magenta); }

        /* --- PRANK & ANIMASI --- */
        #loading-screen, #cat-prank-screen { font-family: 'VT323', monospace; }
        #loading-header { color: var(--neon-cyan); text-shadow: 0 0 10px var(--neon-cyan); }
        .progress-bar { background-color: var(--neon-cyan); font-family: 'Poppins', sans-serif; font-weight: 700;}
        #cat-art { white-space: pre; color: var(--neon-green); }
        #roulette-display { font-weight: 700; transition: all 0.1s; }
        .roulette-winner { color: var(--neon-green); text-shadow: 0 0 20px var(--neon-green); transform: scale(1.2); }
        .glitch-text { animation: text-glitch 2s infinite; }
        
        /* --- KARTU --- */
        .group-card { background: rgba(0,0,0,0.4); border: 1px solid rgba(0, 245, 255, 0.3); }
        .personal-card { border: 2px solid var(--neon-cyan); box-shadow: 0 0 30px var(--neon-cyan); }
        .card-header { font-size: 1.3rem; font-weight: 700; }
        .list-group-item { background: transparent; color: var(--text-light); border-color: rgba(0, 245, 255, 0.2) !important;}
        .task-assignment { background: rgba(0,0,0,0.3); border: 2px solid; }
        .task-reveal { cursor: pointer; user-select: none; }
        .task-text { transition: filter 0.3s ease-out; }
        .task-blurred { filter: blur(8px); }
        .popping { animation: task-pop 0.3s ease-out; }
        .group-1{--group-color:#39FF14}.group-2{--group-color:#00f5ff}.group-3{--group-color:#ff00ff}.group-4{--group-color:#FF9800}.group-5{--group-color:#F44336}.group-6{--group-color:#9C27B0}
        .card-header, .task-assignment { background-color: var(--group-color); border-color: var(--group-color); }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 245, 255, 0.7); } 70% { transform: scale(1.1); box-shadow: 0 0 15px 25px rgba(0, 245, 255, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 245, 255, 0); } }
        @keyframes text-glitch{ 0%{ text-shadow: 0.05em 0 0 rgba(255,0,0,.75), -0.025em -0.05em 0 rgba(0,255,0,.75), 0.025em 0.05em 0 rgba(0,0,255,.75); } 15%{ text-shadow: 0.05em 0 0 rgba(255,0,0,.75), -0.025em -0.05em 0 rgba(0,255,0,.75), 0.025em 0.05em 0 rgba(0,0,255,.75); } 16%{ text-shadow: -0.05em -0.025em 0 rgba(255,0,0,.75), 0.025em 0.025em 0 rgba(0,255,0,.75), -0.05em -0.05em 0 rgba(0,0,255,.75); } 50%{ text-shadow: -0.05em -0.025em 0 rgba(255,0,0,.75), 0.025em 0.025em 0 rgba(0,255,0,.75), -0.05em -0.05em 0 rgba(0,0,255,.75); } 51%{ text-shadow: 0.05em 0.05em 0 rgba(255,0,0,.75), 0.05em 0 0 rgba(0,255,0,.75), 0 -0.05em 0 rgba(0,0,255,.75); } 100%{ text-shadow: 0.05em 0.05em 0 rgba(255,0,0,.75), 0.05em 0 0 rgba(0,255,0,.75), 0 -0.05em 0 rgba(0,0,255,.75); } }
        @keyframes task-pop { 0% { transform: scale(1); } 50% { transform: scale(1.3); } 100% { transform: scale(1); } }
    </style>
</head>
<body>
    <canvas id="matrix-canvas"></canvas>

    <div class="container" id="main-container">
        <div id="intro-screen" class="screen text-center">
            <h2 class="mb-3 glitch-text">Project Chimera VIII.3</h2>
            <p class="lead">Prosedur penempatan unit akan dimulai. Lakukan autentikasi biometrik untuk melanjutkan.</p>
            <div id="fingerprint-icon" class="mt-4" title="Sentuh untuk memulai">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" class="bi bi-fingerprint" viewBox="0 0 16 16"><path d="M8.06 6.5a.5.5 0 0 1 .5.5v.776a11.5 11.5 0 0 1-.552 3.519l-1.331 4.14a.5.5 0 0 1-.952-.305l1.33-4.141a10.5 10.5 0 0 0 .504-3.213V7a.5.5 0 0 1 .5-.5Z"/><path d="M6.06 7a.5.5 0 0 1 .5.5v.776a11.5 11.5 0 0 1-.552 3.519l-1.331 4.14a.5.5 0 0 1-.952-.305l1.33-4.141a10.5 10.5 0 0 0 .504-3.213V7.5a.5.5 0 0 1 .5-.5Z"/><path d="M4.06 8.5a.5.5 0 0 1 .5.5v.776a11.5 11.5 0 0 1-.552 3.519l-1.331 4.14a.5.5 0 0 1-.952-.305l1.33-4.141a10.5 10.5 0 0 0 .504-3.213V9a.5.5 0 0 1 .5-.5Z"/><path d="M10.06 7a.5.5 0 0 1 .5.5v.776a11.5 11.5 0 0 1-.552 3.519l-1.331 4.14a.5.5 0 0 1-.952-.305l1.33-4.141a10.5 10.5 0 0 0 .504-3.213V7.5a.5.5 0 0 1 .5-.5Z"/><path d="M12.06 8.5a.5.5 0 0 1 .5.5v.776a11.5 11.5 0 0 1-.552 3.519l-1.331 4.14a.5.5 0 0 1-.952-.305l1.33-4.141a10.5 10.5 0 0 0 .504-3.213V9a.5.5 0 0 1 .5-.5Z"/><path d="M.431 5.952a.5.5 0 0 1 .4.093l1.106 1.041a.5.5 0 0 1-.659.753l-1.105-1.04a.5.5 0 0 1 .258-.846Zm14.912-.01a.5.5 0 0 1 .258.846l-1.105 1.04a.5.5 0 1 1-.659-.753l1.106-1.041a.5.5 0 0 1 .4.093ZM3.714 4.159a.5.5 0 0 1 .38.182l.85 1.276a.5.5 0 0 1-.812.542l-.85-1.275a.5.5 0 0 1 .432-.725Zm8.572 0a.5.5 0 0 1 .432.725l-.85 1.275a.5.5 0 0 1-.812-.542l.85-1.276a.5.5 0 0 1 .38-.182ZM6.34 2.376a.5.5 0 0 1 .416.273l.535 1.07a.5.5 0 0 1-.865.433l-.535-1.07a.5.5 0 0 1 .45-.706Zm3.32 0a.5.5 0 0 1 .45.706l-.535 1.07a.5.5 0 0 1-.865-.433l.535-1.07a.5.5 0 0 1 .416-.273ZM8 1.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1a.5.5 0 0 1 .5-.5Z"/></svg>
            </div>
            <button id="start-portal-btn" class="btn btn-lg mt-4 px-5">MEMBUKA PORTAL</button>
        </div>
        
        <div id="name-entry-screen" class="screen hidden">
            <h2 class="mb-3 glitch-text">Identifikasi Unit</h2>
            <p>Masukkan kode nama sandimu untuk konfirmasi penempatan.</p>
            <input type="text" id="name-input" class="form-control form-control-lg" placeholder="Contoh: Kenzie, Agra, Dinda...">
            <button id="submit-name-btn" class="btn btn-lg mt-4">PROSES PENEMPATAN</button>
            <p id="error-message" class="mt-3"></p>
        </div>
        </div>
    
    <audio id="bg-music" loop preload="auto" src="https://github.com/google-gemini-demo/audios/raw/main/synthwave-bg.mp3"></audio>
    <audio id="heartbeat-sound" preload="auto" src="https://github.com/google-gemini-demo/audios/raw/main/heartbeat.mp3"></audio>
    <audio id="glitch-sound" preload="auto" src="https://github.com/google-gemini-demo/audios/raw/main/glitch.wav"></audio>
    <audio id="typing-sound" preload="auto" src="https://github.com/google-gemini-demo/audios/raw/main/typing.mp3"></audio>
    <audio id="explosion-sound" preload="auto" src="https://github.com/google-gemini-demo/audios/raw/main/explosion.mp3"></audio>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const groupData = [
            { id: 1, name: "Quantum Coders", colorEmoji: "üü¢", members: ["I Ngurah Putu Agra Ananda Putra", "I Ngurah Made Bagas Ananta Putra", "Rianna Orquidea Pousserlee", "Ni Kadek Dinesha Nalini"], task: "Poster" },
            { id: 2, name: "Algorithmic Avengers", colorEmoji: "üîµ", members: ["I Gusti Bagus Agung Mahaputra", "I Kadek Ananda Kenzie Darmawan", "I Wayan Sandika Jaya Wiguna", "Shalonia Cinta Safinatunnazzah"], task: "Infografis" },
            { id: 3, name: "Cybernetic Syndicate", colorEmoji: "üü£", members: ["Nyoman Josh Deandra Devaryan", "Pande Putu Wira Nandana Saputra", "Ana Nailul Aqilah Saraswati", "Anaaya Kim Shaqina"], task: "Flyer" },
            { id: 4, name: "Neural Navigators", colorEmoji: "üü†", members: ["Kadek Mahendra Prastyawan Putra", "I Kadek Hellenic Adi Putra", "Aiko Belva Kaswadi", "Reyzia Alika Mahika"], task: "Poster" },
            { id: 5, name: "Project Firewall", colorEmoji: "üî¥", members: ["Muhammad Banyukarna Ardianto", "I Putu Bayu Syahputra", "Deshinta Aurora Puteri Suwamana", "Ida Ayu Kade Meyliana Sakarani Murti"], task: "Infografis" },
            { id: 6, name: "The Glitch Mob", colorEmoji: "‚ö™", members: ["I Kadek Suryanata Dinata", "Satya Kenzie Putra Pami", "Kadek Wistara Laksana", "I Putu Maheza Pandu Pratama"], task: "Flyer" }
        ];

        const funFacts = ["Otak manusia menghasilkan listrik yang cukup untuk menyalakan bohlam kecil.", "Ada lebih banyak kemungkinan permainan catur daripada jumlah atom di alam semesta.", "Password paling umum di dunia adalah '123456'.", "Email ditemukan sebelum World Wide Web (www).", "Kecoa bisa hidup beberapa minggu tanpa kepala."];
        const glitchTexts = ["Mengakses Jaringan Saraf...", "Servernya minta kopi, sabar...", "Terjadi anomali kuantum...", "Error 418: I'm a teapot.", "Menghubungi satelit Elon Musk..."];
        const quizData = [ { question: "Dalam keamanan siber, apa itu 'Phishing'?", options: ["Sebuah virus", "Teknik memancing data sensitif", "Sebuah bahasa pemrograman"], correctAnswer: 1 }, { question: "Apa kepanjangan dari 'URL'?", options: ["Universal Resource Locator", "Uniform Read Link", "Universal Read Locator"], correctAnswer: 0 }, { question: "'Cloud Computing' artinya menyimpan data di...", options: ["Langit", "Server internet", "Flashdisk besar"], correctAnswer: 1 }];
        
        let currentQuiz = {}, selectedAnswerIndex = -1;
        const mainContainer = document.getElementById('main-container');
        const sounds = { bgMusic: document.getElementById('bg-music'), heartbeat: document.getElementById('heartbeat-sound'), glitch: document.getElementById('glitch-sound'), typing: document.getElementById('typing-sound'), explosion: document.getElementById('explosion-sound') };

        // --- MATRIX RAIN EFFECT ---
        const canvas = document.createElement('canvas');
        canvas.id = 'matrix-canvas';
        document.body.insertBefore(canvas, document.body.firstChild);
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const matrixChars = "„Ç¢„Ç°„Ç´„Çµ„Çø„Éä„Éè„Éû„É§„É£„É©„ÉØ„Ç¨„Ç∂„ÉÄ„Éê„Éë„Ç§„Ç£„Ç≠„Ç∑„ÉÅ„Éã„Éí„Éü„É™„É∞„ÇÆ„Ç∏„ÉÇ„Éì„Éî„Ç¶„Ç•„ÇØ„Çπ„ÉÑ„Éå„Éï„É†„É¶„É•„É´„Ç∞„Ç∫„Éñ„ÉÖ„Éó„Ç®„Çß„Ç±„Çª„ÉÜ„Éç„Éò„É°„É¨„É±„Ç≤„Çº„Éá„Éô„Éö„Ç™„Ç©„Ç≥„ÇΩ„Éà„Éé„Éõ„É¢„É®„Éß„É≠„É≤„Ç¥„Çæ„Éâ„Éú„Éù„É¥„ÉÉ„É≥0123456789";
        const chars = matrixChars.split('');
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = Array.from({ length: columns }).fill(1);
        function drawMatrix() {
            ctx.fillStyle = 'rgba(13, 13, 26, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'var(--neon-cyan)';
            ctx.font = `${fontSize}px VT323`;
            for(let i = 0; i < drops.length; i++) {
                const text = chars[Math.floor(Math.random() * chars.length)];
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                if(drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }
        setInterval(drawMatrix, 40);
        
        async function startTheShow(userName) { /* ... (fungsi ini sama) ... */ }
        function createGroupCardHTML(group, isPersonal = false) { /* ... (fungsi ini sama) ... */ }
        function typeWriter(element, text, speed) { /* ... (fungsi ini sama) ... */ }
        function displayQuiz(allGroups) { /* ... (fungsi ini sama) ... */ }
        function handleQuizOptionClick(e) { /* ... (fungsi ini sama) ... */ }
        function handleSubmitAnswer(allGroups, modalInstance) { /* ... (fungsi ini sama) ... */ }
        async function startSpinnerAnimation(allGroups) { /* ... (fungsi ini sama) ... */ }

        // --- EVENT LISTENER UTAMA ---
        document.getElementById('fingerprint-icon').addEventListener('click', function() {
            Object.values(sounds).forEach(sound => { sound.play().catch(e => {}); sound.pause(); sound.currentTime = 0; });
            sounds.bgMusic.volume = 0.2;
            sounds.bgMusic.play().catch(e => {});
            document.getElementById('intro-screen').classList.add('hidden');
            document.getElementById('name-entry-screen').classList.remove('hidden');
        }, { once: true });

        document.getElementById('submit-name-btn').addEventListener('click', () => {
            const nameInput = document.getElementById('name-input').value.trim();
            if (nameInput === "") { document.getElementById('error-message').textContent = "Input tidak valid."; return; }
            startTheShow(nameInput);
        });

        document.body.addEventListener('click', function(e) {
            const taskRevealElement = e.target.closest('.task-reveal');
            if(taskRevealElement) {
                const blurredText = taskRevealElement.querySelector('.task-blurred');
                const actualTask = taskRevealElement.querySelector('.d-none');
                if (blurredText && actualTask) {
                    sounds.explosion.currentTime = 0;
                    sounds.explosion.play().catch(e => {});
                    blurredText.textContent = actualTask.textContent;
                    blurredText.classList.remove('task-blurred');
                    blurredText.classList.add('popping');
                    blurredText.addEventListener('animationend', () => blurredText.classList.remove('popping'), { once: true });
                }
            }
        });
        
        // --- IMPLEMENTASI FUNGSI HELPER (BEBERAPA DIUPDATE) ---
        async function startTheShow(userName) {
            document.getElementById('name-entry-screen').classList.add('hidden');
            const userNameLower = userName.toLowerCase();
            let userGroup = groupData.find(g => g.members.some(member => member.toLowerCase().split(' ').includes(userNameLower)));
            if (!userGroup) {
                document.getElementById('error-message').textContent = "Autentikasi Gagal. Unit tidak dikenali.";
                document.getElementById('name-entry-screen').classList.remove('hidden');
                return;
            }
            mainContainer.innerHTML += `<div id="loading-screen" class="screen"><p id="loading-header" class="glitch-text">Menginisialisasi Jaringan Saraf...</p><div id="fun-fact"></div><div class="progress" style="height: 25px;"><div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%">0%</div></div></div>`;
            sounds.heartbeat.play().catch(e => {});
            const progressBar = document.getElementById('progress-bar');
            const funFactEl = document.getElementById('fun-fact');
            let progress = 0;
            let factInterval = setInterval(() => { funFactEl.textContent = "Fun Fact: " + funFacts[Math.floor(Math.random() * funFacts.length)]; }, 2000);
            while (progress < 30) { progress++; progressBar.style.width = `${progress}%`; progressBar.textContent = `${progress}%`; await new Promise(r => setTimeout(r, 40)); }
            clearInterval(factInterval); sounds.glitch.play().catch(e => {}); mainContainer.classList.add('glitch-active');
            let glitchTextInterval = setInterval(() => { funFactEl.textContent = glitchTexts[Math.floor(Math.random() * glitchTexts.length)]; }, 1000);
            await new Promise(r => setTimeout(r, 500));
            progress = 25; progressBar.style.width = `${progress}%`;
            await new Promise(r => setTimeout(r, 500));
            progress = 40; progressBar.style.width = `${progress}%`;
            await new Promise(r => setTimeout(r, 2000));
            clearInterval(glitchTextInterval); mainContainer.classList.remove('glitch-active');
            sounds.glitch.pause(); sounds.typing.play().catch(e => {});
            document.getElementById('loading-screen').classList.add('hidden');
            mainContainer.innerHTML += `<div id="cat-prank-screen" class="screen"><h3>[ Anomali Terdeteksi... ]</h3><pre id="cat-art">  /\\_/\\\n ( o.o )\n  > ^ <</pre><h3 id="cat-text">Entitas Kucing Mengambil Alih Sistem...</h3></div>`;
            await new Promise(r => setTimeout(r, 4000));
            sounds.typing.pause(); sounds.heartbeat.pause();
            document.getElementById('cat-prank-screen').classList.add('hidden');
            mainContainer.innerHTML += `<div id="roulette-screen" class="screen text-center"><h2 class="mb-4">Memproses Algoritma Penempatan...</h2><div id="roulette-display" class="h1"></div></div>`;
            const rouletteDisplay = document.getElementById('roulette-display');
            let spinInterval = setInterval(() => {
                const randomGroup = groupData[Math.floor(Math.random() * groupData.length)];
                rouletteDisplay.textContent = randomGroup.name;
            }, 100);
            await new Promise(r => setTimeout(r, 5000));
            clearInterval(spinInterval);
            rouletteDisplay.textContent = userGroup.name;
            rouletteDisplay.classList.add('roulette-winner');
            await new Promise(r => setTimeout(r, 2000));
            document.getElementById('roulette-screen').classList.add('hidden');
            mainContainer.innerHTML += `<div id="main-content"><div id="personal-reveal" class="text-center"><h2 id="welcome-message"></h2><div id="personal-card-container" class="d-flex justify-content-center mt-3"></div><button id="show-all-button" class="btn btn-lg mt-4">Retas Sistem & Lihat Semua!</button></div><div id="spinner-container" class="hidden my-4"></div><div id="all-groups-reveal" class="hidden"><h3 class="mt-5">Sistem Diretas. Data Semua Unit Terungkap:</h3><div id="all-groups-container" class="row g-4 mt-3 justify-content-center"></div></div></div>`;
            confetti({ particleCount: 150, spread: 90, origin: { y: 0.6 }, colors: ['#00f5ff', '#ff00ff', '#f0f0f0'] });
            document.getElementById('personal-card-container').innerHTML = createGroupCardHTML(userGroup, true);
            typeWriter(document.getElementById('welcome-message'), `Penempatan Berhasil, Agen ${userName}!`, 75);
            document.getElementById('show-all-button').addEventListener('click', () => displayQuiz(groupData));
        }
        function createGroupCardHTML(group, isPersonal = false) {
             const membersHTML = group.members.map(member => `<li class="list-group-item">${member}</li>`).join('');
            return `
                <div class="card group-card ${isPersonal ? 'personal-card' : ''} group-${group.id} rounded-4">
                    <div class="card-header fw-bold">${group.colorEmoji} ${group.name}</div>
                    <div class="card-body p-0">
                        <ul class="list-group list-group-flush">${membersHTML}</ul>
                    </div>
                    <div class="card-footer task-assignment fw-bold">
                        <div class="task-reveal" role="button" tabindex="0" aria-label="Klik untuk melihat tugas">
                           <span class="task-text task-blurred">KLIK UNTUK MELEDAKKAN!</span>
                           <span class="d-none">${group.task}</span>
                        </div>
                    </div>
                </div>`;
        }
        function typeWriter(element, text, speed) { let i = 0; element.innerHTML = ""; const type = () => { if (i < text.length) { element.innerHTML += text.charAt(i); i++; setTimeout(type, speed); } }; type(); }
        function displayQuiz(allGroups) {
            const existingModal = document.getElementById('quizModal');
            if (existingModal) existingModal.remove();
            const modalHTML = `<div class="modal fade" id="quizModal" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class="modal-content text-light"><div class="modal-header border-0"><h5 class="modal-title w-100 text-center">‚ö° Ujian Keamanan Sistem! ‚ö°</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body text-center"><p>Bypass firewall ini untuk melihat data lain!</p><p id="quiz-question" class="h5 my-3"></p><div id="quiz-options" class="d-grid gap-2"></div><p id="quiz-feedback" class="mt-3 fw-bold"></p></div><div class="modal-footer justify-content-center border-0"><button id="submit-answer-btn" class="btn">Konfirmasi Retasan</button></div></div></div></div>`;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            currentQuiz = quizData[Math.floor(Math.random() * quizData.length)];
            document.getElementById('quiz-question').textContent = currentQuiz.question;
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';
            currentQuiz.options.forEach((option, index) => { optionsContainer.innerHTML += `<button class="btn quiz-option-btn" data-index="${index}">${option}</button>`; });
            const quizModal = new bootstrap.Modal(document.getElementById('quizModal'));
            quizModal.show();
            document.getElementById('submit-answer-btn').onclick = () => handleSubmitAnswer(allGroups, quizModal);
            optionsContainer.onclick = handleQuizOptionClick;
        }
        function handleQuizOptionClick(e) {
            if (e.target.classList.contains('quiz-option-btn')) {
                document.querySelectorAll('.quiz-option-btn').forEach(btn => btn.classList.remove('selected'));
                e.target.classList.add('selected');
                selectedAnswerIndex = parseInt(e.target.dataset.index);
            }
        }
        function handleSubmitAnswer(allGroups, modalInstance) {
            if (selectedAnswerIndex === -1) return;
            const feedbackEl = document.getElementById('quiz-feedback');
            const isCorrect = selectedAnswerIndex === currentQuiz.correctAnswer;
            feedbackEl.className = `fw-bold mt-3 ${isCorrect ? 'correct' : 'incorrect'}`;
            feedbackEl.textContent = isCorrect ? "Firewall Ditembus! Akses diberikan..." : "Akses Ditolak! Terdeteksi penyusup...";
            setTimeout(() => {
                modalInstance.hide();
                const modalEl = document.getElementById('quizModal');
                modalEl.addEventListener('hidden.bs.modal', () => { if (isCorrect) startSpinnerAnimation(allGroups); }, { once: true });
            }, 2000);
        }
        async function startSpinnerAnimation(allGroups) {
            document.getElementById('show-all-button').classList.add('hidden');
            const spinnerContainer = document.getElementById('spinner-container');
            spinnerContainer.classList.remove('hidden');
            spinnerContainer.innerHTML = `<h3 class="mb-4">Mendekripsi Data Unit Lain...</h3><div id="spinner-card-area" class="d-flex justify-content-center"></div>`;
            const spinnerCardArea = document.getElementById('spinner-card-area');
            let spinInterval = setInterval(() => {
                const randomGroup = allGroups[Math.floor(Math.random() * allGroups.length)];
                spinnerCardArea.innerHTML = createGroupCardHTML(randomGroup);
            }, 150);
            await new Promise(r => setTimeout(r, 5000));
            clearInterval(spinInterval);
            const finalCard = spinnerCardArea.firstElementChild;
            if(finalCard) finalCard.classList.add('exploded');
            await new Promise(r => setTimeout(r, 500));
            spinnerContainer.classList.add('hidden');
            const allGroupsReveal = document.getElementById('all-groups-reveal');
            allGroupsReveal.classList.remove('hidden');
            const allGroupsContainer = document.getElementById('all-groups-container');
            allGroupsContainer.innerHTML = '';
            allGroups.forEach(group => {
                const col = document.createElement('div');
                col.className = 'col-lg-4 col-md-6 col-sm-12';
                col.innerHTML = createGroupCardHTML(group);
                allGroupsContainer.appendChild(col);
            });
        }
    });
    </script>
</body>
</html>
